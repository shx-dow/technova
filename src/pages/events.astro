---
import BaseLayout from "../layouts/baseLayout.astro";

// placeholder event data
const categories = [
  { id: "all", label: "All" },
  { id: "hackathon", label: "Hackathons" },
  { id: "competition", label: "Competitions" },
  { id: "workshop", label: "Workshops" },
  { id: "talk", label: "Talks" },
  { id: "fun", label: "Fun" },
];

const events = [
  {
    id: 1,
    title: "Hackathon",
    category: "hackathon",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "2-4",
    description: "some relevant info",
    featured: true,
  },
  {
    id: 2,
    title: "Competition 1",
    category: "competition",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "1-2",
    description: "some relevant info",
    featured: true,
  },
  {
    id: 3,
    title: "Competition 2",
    category: "competition",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "2-3",
    description: "some relevant info",
    featured: true,
  },
  {
    id: 4,
    title: "Workshop 1",
    category: "workshop",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "Individual",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 5,
    title: "Workshop 2",
    category: "workshop",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "Individual",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 6,
    title: "Talk 1",
    category: "talk",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "-",
    teamSize: "Open",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 7,
    title: "Talk 2",
    category: "talk",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "-",
    teamSize: "Open",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 8,
    title: "Competition 3",
    category: "competition",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "Individual",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 9,
    title: "Competition 4",
    category: "competition",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "1-2",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 10,
    title: "Quiz",
    category: "fun",
    date: "27 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "2-3",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 11,
    title: "Gaming",
    category: "fun",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "4",
    description: "some relevant info",
    featured: false,
  },
  {
    id: 12,
    title: "Competition 5",
    category: "competition",
    date: "28 Feb",
    time: "TBD",
    venue: "TBD",
    prize: "TBD",
    teamSize: "3-5",
    description: "some relevant info",
    featured: false,
  },
];
---

<BaseLayout title="Events | TechNova 2026">
  <header class="page-header">
    <div class="container-editorial">
      <p class="page-label">X+ Events</p>
      <h1 class="page-title">Events & Competitions</h1>
      <p class="page-description">
        From intense hackathons to game battles, explore the full lineup of events at TechNova 2026.
      </p>
    </div>
  </header>

  <!-- Featured Events -->
  <section class="section">
    <div class="container-editorial">
      <h2 class="section-label">Featured</h2>
      
      <div class="featured-grid">
        {events.filter(e => e.featured).map((event) => (
          <article class="featured-card event-card" data-category={event.category}>
            <div class="featured-card-inner">
              <div class="featured-header">
                <span class="event-badge">{event.category}</span>
                <span class="event-prize">{event.prize}</span>
              </div>
              
              <h3 class="featured-title">{event.title}</h3>
              <p class="featured-description">{event.description}</p>
              
              <div class="event-meta">
                <span>{event.date} · {event.time}</span>
                <span>{event.venue}</span>
                <span>Team: {event.teamSize}</span>
              </div>
              
              <a href="#" class="event-link">Register →</a>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- All Events -->
  <section class="section">
    <div class="container-editorial">
      <h2 class="section-label">All Events</h2>
      
      <div class="events-list" id="events-grid">
        {events.filter(e => !e.featured).map((event) => (
          <article class="event-item event-card" data-category={event.category}>
            <div class="event-item-content">
              <div class="event-item-header">
                <span class="event-badge">{event.category}</span>
                {event.prize !== "-" && event.prize !== "Certificate" && (
                  <span class="event-prize-small">{event.prize}</span>
                )}
              </div>
              
              <h3 class="event-item-title">{event.title}</h3>
              <p class="event-item-description">{event.description}</p>
              
              <div class="event-item-meta">
                <span>{event.date} · {event.time}</span>
                <span>{event.venue}</span>
              </div>
            </div>
            
            <a href="#" class="event-item-link">View →</a>
          </article>
        ))}
      </div>

      <!-- Empty State -->
      <div id="empty-state" class="empty-state hidden">
        <p>No events found in this category.</p>
      </div>
    </div>
  </section>

  <!-- Schedule CTA -->
  <section class="section">
    <div class="container-editorial">
      <div class="cta-block">
        <h2 class="cta-title">Download the full schedule</h2>
        <p class="cta-description">Get the complete event schedule with timings and venues.</p>
        <div class="cta-actions">
          <a href="#" class="btn-primary">Download PDF</a>
          <a href="#" class="btn-outline">Add to Calendar</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Page Header */
  .page-header {
    padding: 8rem 1.5rem 3rem;
  }

  .page-label {
    font-size: 0.6875rem;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-accent-editorial);
    margin-bottom: 1rem;
  }

  .page-title {
    font-size: clamp(2.5rem, 6vw, 3.5rem);
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-bottom: 1rem;
  }

  .page-description {
    font-size: 1.0625rem;
    color: var(--color-text-muted);
    max-width: 540px;
    line-height: 1.6;
  }

  /* Filter Bar */
  .filter-bar {
    position: sticky;
    top: 4.5rem;
    z-index: 30;
    padding: 1rem 0;
    background: rgba(8, 8, 12, 0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--color-border);
  }

  .filter-scroll {
    display: flex;
    gap: 0.5rem;
    overflow-x: auto;
    padding-bottom: 0.25rem;
    scrollbar-width: none;
  }

  .filter-scroll::-webkit-scrollbar {
    display: none;
  }

  .filter-btn {
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    white-space: nowrap;
    background: transparent;
    color: var(--color-text-dim);
    border: 1px solid var(--color-border);
    cursor: pointer;
    transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease;
  }

  .filter-btn:hover {
    color: var(--color-text-muted);
    border-color: var(--color-border-hover);
  }

  .filter-btn.active {
    background: var(--color-text);
    color: var(--color-bg-deep);
    border-color: var(--color-text);
  }

  /* Section */
  .section {
    padding: 3rem 1.5rem;
  }

  .section-label {
    font-size: 0.6875rem;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-text-dim);
    margin-bottom: 1.5rem;
  }

  /* Featured Grid */
  .featured-grid {
    display: grid;
    gap: 1px;
    background: var(--color-border);
    border: 1px solid var(--color-border);
  }

  @media (min-width: 768px) {
    .featured-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .featured-card {
    background: var(--color-bg-deep);
  }

  .featured-card-inner {
    padding: 1.5rem;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .featured-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
  }

  .event-badge {
    font-size: 0.5625rem;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 0.25rem 0.5rem;
    background: var(--color-surface);
    color: var(--color-text-muted);
    border: 1px solid var(--color-border);
  }

  .event-prize {
    font-family: var(--font-display);
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-accent-editorial);
  }

  .featured-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .featured-description {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin-bottom: 1rem;
    flex-grow: 1;
  }

  .event-meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    font-size: 0.6875rem;
    color: var(--color-text-dim);
    margin-bottom: 1rem;
  }

  .event-link {
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-text);
    transition: opacity 0.2s ease;
  }

  .event-link:hover {
    opacity: 0.7;
  }

  /* Events List */
  .events-list {
    display: flex;
    flex-direction: column;
    border-top: 1px solid var(--color-border);
  }

  .event-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.5rem 0;
    border-bottom: 1px solid var(--color-border);
  }

  .event-item-content {
    flex: 1;
    min-width: 0;
  }

  .event-item-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.5rem;
  }

  .event-prize-small {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-accent-editorial);
  }

  .event-item-title {
    font-size: 1.0625rem;
    font-weight: 600;
    margin-bottom: 0.375rem;
  }

  .event-item-description {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin-bottom: 0.5rem;
  }

  .event-item-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    font-size: 0.6875rem;
    color: var(--color-text-dim);
  }

  .event-item-link {
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-text-muted);
    white-space: nowrap;
    transition: color 0.2s ease;
  }

  .event-item-link:hover {
    color: var(--color-text);
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 4rem 0;
    color: var(--color-text-dim);
  }

  .empty-state.hidden {
    display: none;
  }

  /* CTA Block */
  .cta-block {
    padding: 3rem 2rem;
    border: 1px solid var(--color-border);
    text-align: center;
  }

  .cta-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .cta-description {
    font-size: 0.9375rem;
    color: var(--color-text-muted);
    margin-bottom: 1.5rem;
  }

  .cta-actions {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
  }

  /* Hidden by filter */
  .event-card.hidden-by-filter {
    display: none;
  }
</style>

<script>
  const categoryBtns = document.querySelectorAll('.filter-btn');
  const eventCards = document.querySelectorAll('.event-card');
  const emptyState = document.getElementById('empty-state');

  categoryBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const category = btn.getAttribute('data-category');
      
      // Update button styles
      categoryBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // Filter events
      let visibleCount = 0;
      eventCards.forEach(card => {
        const cardCategory = card.getAttribute('data-category');
        if (category === 'all' || cardCategory === category) {
          card.classList.remove('hidden-by-filter');
          visibleCount++;
        } else {
          card.classList.add('hidden-by-filter');
        }
      });

      // Show/hide empty state
      if (emptyState) {
        emptyState.classList.toggle('hidden', visibleCount > 0);
      }
    });
  });
</script>
